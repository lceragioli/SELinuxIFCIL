(classorder (file))
(class file (read write open getattr))

(type a)

(block A
    (call m(a))
)

(block B
    (call m(a))
    (call m(a))
)

(macro m((type x))
    (type a)
    (allow x x (file (read)))
)